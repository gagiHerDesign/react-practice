<!DOCTYPE html>
<html>

  <head>
    <title>é–‹å§‹ä½¿ç”¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <script src="./vendor.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
      button {
        margin: 5rem;
      }
    </style>
  </head>

  <body class="bg-lighter">
    <div class="container main my-5">
      <div class="row">
        <main class="col post">
          <!-- ç« ç¯€æ¨™é¡Œ -->
          <div class="mb-4">
            <h1 class="mt-0 text-muted">é–‹å§‹ä½¿ç”¨ </h1>
          </div>
          <!-- ğŸ”¥ğŸ”¥é–‹å§‹ğŸ”¥ğŸ”¥ -->
          <div id="root"></div>
          <script type="text/babel">
            const { useState, useEffect, useRef, useReducer } = React;

            // AddTask
            function AddTask({ onAddTask }) {
              const [text, setText] = useState('');

              function handleInputChange(event) {
                setText(event.target.value);
              }

              function handleFormSubmit(event) {
                event.preventDefault();
                if (text.trim()) {
                  onAddTask(text);
                  setText('');
                }
              }

              return (
                <form onSubmit={handleFormSubmit}>
                  <input
                    type="text"
                    value={text}
                    onChange={handleInputChange}
                    placeholder="Enter task"
                  />
                  <button type="submit">Add Task</button>
                </form>
              );
            };

            // TaskList
            function TaskList({ tasks, onChangeTask, onDeleteTask }) {
              return (
                <ul>
                  {tasks.map((task) => (
                    <li key={task.id}>
                      <Task task={task} onChange={onChangeTask} onDelete={onDeleteTask} />
                    </li>
                  ))}
                </ul>
              );
            }

            function Task({ task, onChange, onDelete }) {
              const [isEditing, setIsEditing] = useState(false);
              let taskContent;
              if (isEditing) {
                taskContent = (
                  <>
                    <input
                      value={task.text}
                      onChange={(e) => {
                        onChange({
                          ...task,
                          text: e.target.value,
                        });
                      }}
                    />
                    <button onClick={() => setIsEditing(false)}>Save</button>
                  </>
                );
              } else {
                taskContent = (
                  <>
                    {task.text}
                    <button onClick={() => setIsEditing(true)}>Edit</button>
                  </>
                );
              }
              return (
                <label>
                  <input
                    type="checkbox"
                    checked={task.done}
                    onChange={(e) => {
                      onChange({
                        ...task,
                        done: e.target.checked,
                      });
                    }}
                  />
                  {taskContent}
                  <button onClick={() => onDelete(task.id)}>Delete</button>
                </label>
              );
            }


            // Reducer
            function tasksReducer(tasks, action) {
              switch (action.type) {
                case 'added': {
                  return [
                    ...tasks,
                    {
                      id: action.id,
                      text: action.text,
                      done: false,
                    },
                  ];
                }
                case 'changed': {
                  return tasks.map((t) => {
                    if (t.id === action.task.id) {
                      return action.task;
                    } else {
                      return t;
                    }
                  });
                }
                case 'deleted': {
                  // åŸ·è¡Œéæ¿¾ä»»å‹™çš„é‚è¼¯ï¼Œéæ¿¾æ‰å…·æœ‰ç›¸åŒ ID çš„ä»»å‹™ï¼ŒID ä¸åŒçš„ä»»å‹™æœƒè¢«ä¿ç•™
                  return tasks.filter((t) => t.id !== action.id);
                }
                default: {
                  throw Error('Unknown action: ' + action.type);
                }
              }
            }

            let nextId = 3;

            // initialTasks è¨­å®šåˆå§‹å€¼
            const initialTasks = [
              { id: 0, text: 'Visit Kafka Museum', done: true },
              { id: 1, text: 'Watch a puppet show', done: false },
              { id: 2, text: 'Lennon Wall pic', done: false },
            ];

            const App = () => {

              // tasksReducer functionå¯«åœ¨å¤–é¢
              // initialTasks è¨­å®šåˆå§‹å€¼

              const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

              function handleAddTask(text) {
                dispatch({
                  type: 'added',
                  id: nextId++,
                  text: text,
                });
              }

              function handleChangeTask(task) {
                dispatch({
                  type: 'changed',
                  task: task,
                });
              }

              function handleDeleteTask(taskId) {
                dispatch({
                  type: 'deleted',
                  id: taskId,
                });
              }

              return (
                <>
                  <h1>Prague itinerary</h1>
                  <AddTask onAddTask={handleAddTask} />
                  <TaskList
                    tasks={tasks}
                    onChangeTask={handleChangeTask}
                    onDeleteTask={handleDeleteTask}
                  />
                </>
              );
            }

            ReactDOM.createRoot(document.querySelector('#root'))
              .render(<App />)
          </script>
          <!-- ğŸ™‡ğŸ™‡çµæŸğŸ™‡ğŸ™‡ -->
        </main>

        <aside class="col-md-3">
          <div class="sticky-top" style="top: 76px">

            <div class="list-group">

              <a href="/hooks/startHooks.html" class="list-group-item list-group-item-action
        
        active">
                é–‹å§‹ä½¿ç”¨ Hook
              </a>

              <a href="/hooks/inputUseState.html" class="list-group-item list-group-item-action
        
        ">
                input ç¶å®š useState
              </a>

              <a href="/hooks/aboutUseState.html" class="list-group-item list-group-item-action
        
        ">
                é—œæ–¼ useState
              </a>

              <a href="/hooks/aboutUseState2.html" class="list-group-item list-group-item-action
        
        ">
                é—œæ–¼ useState 2
              </a>

              <a href="/hooks/inputComponent.html" class="list-group-item list-group-item-action
        
        ">
                input å…ƒä»¶åŒ–
              </a>

              <a href="/hooks/useEffectIntro.html" class="list-group-item list-group-item-action
        
        ">
                useEffect åŸºç¤ä»‹ç´¹
              </a>

              <a href="/hooks/useEffectLifeCycle.html" class="list-group-item list-group-item-action
        
        ">
                useEffect ç”Ÿå‘½é€±æœŸåŠéåŒæ­¥
              </a>

              <a href="/hooks/asyncList.html" class="list-group-item list-group-item-action
        
        ">
                éåŒæ­¥çš„åˆ—è¡¨å‘ˆç¾
              </a>

              <a href="/hooks/useStateCallback.html" class="list-group-item list-group-item-action
        
        ">
                useState çš„å‰ä¸€å€‹ç‹€æ…‹
              </a>

              <a href="/hooks/bootstrapComponent.html" class="list-group-item list-group-item-action
        
        ">
                Bootstrap å…ƒä»¶èˆ‡ React
              </a>

              <a href="/hooks/useRef.html" class="list-group-item list-group-item-action
        
        ">
                useRef
              </a>

              <a href="/hooks/useEffectRemoveListener.html" class="list-group-item list-group-item-action
        
        ">
                useEffect ç§»é™¤ç›£è½
              </a>

              <a href="/hooks/unsplashApi.html" class="list-group-item list-group-item-action
        
        ">
                Unsplash API æŒ‘æˆ°
              </a>

              <a href="/hooks/unsplashApiComplete.html" class="list-group-item list-group-item-action
        
        ">
                Unsplash API å®Œæˆ
              </a>

            </div>
            <div class="mt-3 text-end p-2 bg-light rounded">
              <small class="text-black-50 fw-light mb-0">æ–‡ä»¶ç‰ˆæœ¬ï¼š2022/10/31</small>
            </div>
          </div>

        </aside>

      </div>
    </div>

    <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-secondary">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">React ç·´ç¿’æ‰‹å†Š</a>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " href="/intro/createApp.html">èªè­˜ React</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/es6/shorthand.html">JS å¿…å‚™è§€å¿µ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/components/intro.html">å…ƒä»¶åŸºç¤</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/hooks/startHooks.html">Hooks</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/form/basicForm.html">è¡¨å–®</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/hooksAdv/lifeCycle.html">Hooks é€²éš</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <footer class="footer py-2 bg-light">
      <div class="container text-center">
        <small class="text-black-50 fw-light mb-0">å…­è§’å­¸é™¢ React èª²ç¨‹å°ˆå±¬æ–‡ä»¶</small>
      </div>
    </footer>
    <link rel="stylesheet" href="./all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  </body>

</html>